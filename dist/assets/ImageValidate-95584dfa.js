import{r as q,b as B,o as l,d as o,z as y,A as v,e as s,t as p,n as d,g as r,ab as D,L as c,f as C,R as j}from"./index-3106e3ea.js";import{b as L}from"./InputTextValidate-a0fc5aa6.js";const N={class:d(["flex flex-column gap-2"])},R={class:"p-error"},F={class:"flex flex-column gap-1"},U={key:0,class:d(["w-full h-full relative flex align-items-center justify-content-center"])},V={key:0,class:"pi pi-plus"},M={key:1,class:"flex flex-column gap-1 align-items-center"},T=s("i",{class:"pi pi-camera text-2xl"},null,-1),E=["accept","onDrop"],G={class:"flex flex-column gap-1"},$=s("span",null,"Đang tải...",-1),A=["src"],J={key:1,class:"w-full h-full",controls:""},O=["src"],I={key:2,class:"w-full h-full flex align-items-center justify-content-center"},W={class:"flex flex-column"},H=s("img",{class:"w-10rem h-10rem object-fit-cover",src:"https://cdn1.iconfinder.com/data/icons/fs-icons-ubuntu-by-franksouza-/512/application-x-rar.png",alt:"Lỗi ảnh"},null,-1),K={class:"p-error"},Z={__name:"ImageValidate",props:{name:{type:String,required:!0,default:""},label:{type:String,required:!1,default:""},class:{type:String,required:!1,default:"w-12rem h-12rem"},style:{type:Object,required:!1,default:()=>{}},disabled:{type:Boolean,required:!1,default:!1},miniSize:{type:Boolean,required:!1,default:!1},required:{type:Boolean,required:!1,default:!0},imageProps:{type:Object,required:!1,default:()=>({maxSize:100,accept:"image/*",type:"JPG,JPEG,PNG"})}},emits:["onUpload","onRemove"],setup(b,{emit:f}){const e=b,{value:n,errorMessage:x,setErrors:m,setValue:g}=L(e.name),u=q(!1),k=t=>{const a=t/1048576;return Number(a%1===0?a.toFixed(0):a.toFixed(2))},w=t=>{var a,i;if(k(t.target.files[0].size)>Number((a=e==null?void 0:e.imageProps)==null?void 0:a.maxSize))return m(`Dung lượng tệp không được vượt quá ${(i=e==null?void 0:e.imageProps)==null?void 0:i.maxSize}MB`),!0;if(!e.imageProps.type.toLowerCase().split(",").includes(t.target.files[0].name.split(".")[t.target.files[0].name.split(".").length-1].toLowerCase()))return m("Tệp không đúng định dạng"),!0},h=async t=>{if(w(t))return;u.value=!0;const a=new FileReader;a.readAsDataURL(t.target.files[0]),a.onload=i=>{i.target.result&&g({name:t.target.files[0].name,base64:i.target.result}),u.value=!1},f("onUpload",t)},P=async t=>{const a={target:{files:[t.dataTransfer.files[0]]}};t.preventDefault(),h(a)},S=t=>{switch(t){case"image/*":return"ảnh";case"video/*":return"video";default:return"file"}},z=t=>{g(null),f("onRemove",t)};return(t,a)=>{var _;const i=B("ProgressSpinner");return l(),o("div",N,[y(s("label",null,[s("span",null,p(e.label),1),y(s("span",R,"*",512),[[v,e.required]])],512),[[v,e.label]]),s("div",F,[s("div",{class:d(["border-1 border-dashed text-main-color border-round-lg overflow-hidden",{"p-disabled":e.disabled},e.class])},[!r(n)&&!u.value?(l(),o("div",U,[e.miniSize?(l(),o("i",V)):(l(),o("div",M,[T,s("span",null,p(`Thêm ${S(e.imageProps.accept)}`),1)])),s("input",{type:"file",class:"absolute top-0 right-0 left-0 bottom-0 opacity-0 on-click",accept:e.imageProps.accept,onDrop:D(P,["prevent"]),onChange:h},null,40,E)])):c("",!0),u.value&&!r(n)?(l(),o("div",{key:1,class:d([e.class,"relative flex justify-content-center align-items-center"])},[s("div",G,[C(i,{style:{width:"40px",height:"40px"},strokeWidth:"3",animationDuration:".5s"}),$])],2)):c("",!0),r(n)&&!u.value?(l(),o("div",{key:2,class:d([e.class,"relative"]),style:j(e.style)},[s("i",{style:{"background-color":"rgba(240, 248, 255, 0.767)"},class:"pi pi-times absolute right-0 p-1 border-round-lg on-click z-5",onClick:a[0]||(a[0]=Q=>z(r(n)))}),e.imageProps.accept==="image/*"?(l(),o("img",{key:0,style:{"object-fit":"contain"},class:"w-full h-full",src:r(n).base64,alt:"Lỗi ảnh"},null,8,A)):c("",!0),e.imageProps.accept==="video/*"?(l(),o("video",J,[s("source",{src:r(n).base64,type:"video/mp4"},null,8,O)])):c("",!0),e.imageProps.accept===".rar"?(l(),o("div",I,[s("div",W,[H,s("span",null,p((_=r(n))==null?void 0:_.name),1)])])):c("",!0)],6)):c("",!0)],2),s("small",K,p(r(x)),1)])])}}};export{Z as _};
