import{a as H,ab as I,l as M,aa as N,r as O,y as U,C as q,b as h,d as o,f as i,g as s,e as t,a2 as z,z as x,A as b,t as p,F as V,h as L,L as j,n as G,a3 as K,ac as J,o as c,H as P}from"./index-d10bef2c.js";import{c as Q,a as k,u as W,b as X,d as Y,_ as Z}from"./InputTextValidate-cac67588.js";const tt=t("div",{class:"flex flex-column gap-2 align-items-center"},[t("span",{class:"text-custom-1 flex"},"Cấu hình bot"),t("span",{style:{"max-width":"30rem"},class:"text-700 line-height-2 text-center"}," Bạn hãy cung cấp thông tin chuẩn xác để bot có thể học và trả lời tự nhiên và đúng nhất. ")],-1),et=t("br",null,null,-1),st={class:"w-full text-right"},nt={class:"flex flex-column gap-3"},lt={class:"flex flex-column gap-2"},at=t("div",null,[K("Hướng dẫn cho trợ lý "),t("span",{class:"p-error"},"*")],-1),ot={class:"flex flex-column gap-2"},it={class:"flex align-items-center gap-2"},ct=t("span",null,"Thêm tệp tin",-1),rt={style:{overflow:"hidden"},class:"relative"},ut=t("i",{class:"pi pi-plus-circle on-click text-800"},null,-1),dt={class:"flex flex-column gap-2"},mt={class:"card-bg-mini inline-flex align-items-center gap-1"},ht={class:"text-700"},pt=["onClick"],_t={key:0,class:"text-custom-mini text-700"},bt={__name:"VirtualAssistantConfig",setup(ft){const y=H(),{onGetterVirtualAssistant:w,onActionGetVirtualAssistant:_,onActionSaveVirtualAssistant:B}=I(),f=M({accountId:N.value,name:null,instructions:null,files:[]}),l=O(""),C=Q({name:k().required("Vui lòng nhập tên trợ lý"),instructions:k().required("Vui lòng nhập hướng dẫn cho trợ lý")}),{values:r,resetForm:A,handleSubmit:F}=W({initialValues:f,validationSchema:C,keepValuesOnUnmount:!0}),{value:u,errorMessage:v}=X("instructions"),{push:S,remove:T}=Y("files"),R=async e=>{const n=["txt","csv","xlsx"];if(!n.includes(e.target.files[0].name.split(".").pop())){l.value=`Chỉ hỗ trợ tệp có đuôi: ${n.join(", ")}`;return}if(+e.target.files[0].size>3145728){l.value="Kích thước tệp không được vượt quá 3MB";return}const d=await J(e.target.files[0]);S(d);const m=document.getElementById("inputFile");m.value="",setTimeout(()=>{window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})},1)},$=e=>{T(e)},D=F(async()=>{l.value="",(await B(r)).success&&_(!0)});return U(w,e=>{A({values:Object.assign(f,e)})}),q(()=>{_()}),(e,n)=>{const d=h("ButtonBack"),m=h("Button"),E=h("Textarea");return c(),o(V,null,[i(d,{onOnBack:n[0]||(n[0]=a=>s(y).replace({name:"VirtualAssistant"}))}),t("div",{style:{"max-width":"52rem"},class:G(["m-auto pt-3",{"px-3":!s(P)}])},[tt,et,t("div",st,[i(m,{label:"Lưu cấu hình",onClick:s(D)},null,8,["onClick"])]),t("div",nt,[i(Z,{label:"Tên trợ lý",name:"name",class:"w-full"}),t("div",lt,[at,t("div",null,[i(E,{modelValue:s(u),"onUpdate:modelValue":n[1]||(n[1]=a=>z(u)?u.value=a:null),rows:"8",class:"w-full line-height-3",placeholder:"Hướng dẫn cho bot..."},null,8,["modelValue"]),x(t("small",{class:"p-error"},p(s(v)),513),[[b,s(v)]])])]),t("div",ot,[t("div",it,[ct,t("div",rt,[ut,t("input",{type:"file",id:"inputFile",class:"absolute top-0 right-0 left-0 bottom-0 opacity-0 on-click",accept:".txt, .xlsx, csv",onChange:R},null,32)]),x(t("small",{class:"p-error"},p(l.value),513),[[b,l.value]])]),t("div",dt,[(c(!0),o(V,null,L(s(r).files,(a,g)=>(c(),o("div",{key:g},[t("div",mt,[t("span",ht,p(a.name),1),t("i",{class:"pi pi-times-circle text-700",onClick:vt=>$(g)},null,8,pt)])]))),128)),s(r).files.length?j("",!0):(c(),o("div",_t," Chưa có tệp tin nào. "))])])])],2)],64)}}};export{bt as default};
