import{r as L,b as P,o as r,d as n,z as y,A as _,e as s,t as f,n as c,g as o,a4 as B,L as p,f as k,R as S,a2 as j}from"./index-3c6b6747.js";import{b as V}from"./InputTextValidate-78f216ca.js";const R={class:"p-error"},N={class:"flex flex-column gap-1"},$={key:0,class:"pi pi-plus"},F={key:1,class:"flex flex-column gap-1 align-items-center"},U=s("i",{class:"pi pi-camera text-2xl"},null,-1),M=["accept","onDrop"],E={class:"flex flex-column gap-1"},O=s("span",null,"Đang tải...",-1),T=["src"],A={key:1,class:"w-full h-full",controls:""},G=["src"],J={key:2,class:"w-full h-full flex align-items-center justify-content-center"},I={class:"flex flex-column"},W=s("img",{class:"w-10rem h-10rem object-fit-cover",src:"https://cdn1.iconfinder.com/data/icons/fs-icons-ubuntu-by-franksouza-/512/application-x-rar.png",alt:"Lỗi ảnh"},null,-1),H={class:"p-error"},ee={__name:"ImageValidate",props:{name:{type:String,required:!0,default:""},label:{type:String,required:!1,default:""},class:{type:String,required:!1,default:"w-12rem h-12rem"},style:{type:Object,required:!1,default:()=>{}},disabled:{type:Boolean,required:!1,default:!1},miniSize:{type:Boolean,required:!1,default:!1},required:{type:Boolean,required:!1,default:!0},imageProps:{type:Object,required:!1,default:()=>({maxSize:100,accept:"image/*",type:"JPG,JPEG,PNG"})}},emits:["onUpload","onRemove"],setup(b,{emit:g}){const e=b,{value:a,errorMessage:h,setErrors:v,setValue:x}=V(e.name),d=L(!1),u=t=>{const l=t/1048576;return Number(l%1===0?l.toFixed(0):l.toFixed(2))},w=t=>{var l,i;if(u(t.target.files[0].size)>Number((l=e==null?void 0:e.imageProps)==null?void 0:l.maxSize))return v(`Dung lượng tệp không được vượt quá ${(i=e==null?void 0:e.imageProps)==null?void 0:i.maxSize}MB`),!0;if(!e.imageProps.type.toLowerCase().split(",").includes(t.target.files[0].name.split(".")[t.target.files[0].name.split(".").length-1].toLowerCase()))return v("Tệp không đúng định dạng"),!0},m=async t=>{if(w(t))return;d.value=!0;const l=new FileReader;l.readAsDataURL(t.target.files[0]),l.onload=i=>{i.target.result&&x({name:t.target.files[0].name,base64:i.target.result}),d.value=!1},g("onUpload",t)},z=async t=>{const l={target:{files:[t.dataTransfer.files[0]]}};t.preventDefault(),m(l)},D=t=>{switch(t){case"image/*":return"ảnh";case"video/*":return"video";default:return"file"}},C=t=>{x(null),g("onRemove",t)};return(t,l)=>{var q;const i=P("ProgressSpinner");return r(),n("div",{class:c(["flex flex-column gap-2",e.class])},[y(s("label",null,[s("span",null,f(e.label),1),y(s("span",R," *",512),[[_,e.required]])],512),[[_,e.label]]),s("div",N,[s("div",{class:c([{"p-disabled":e.disabled},"border-1 border-dashed text-main-color border-round-lg overflow-hidden"])},[!o(a)&&!d.value?(r(),n("div",{key:0,class:c([e.class,"relative flex align-items-center justify-content-center"])},[e.miniSize?(r(),n("i",$)):(r(),n("div",F,[U,s("span",null,f(`Thêm ${D(e.imageProps.accept)}`),1)])),s("input",{type:"file",class:"absolute top-0 right-0 left-0 bottom-0 opacity-0 on-click",accept:e.imageProps.accept,onDrop:B(z,["prevent"]),onChange:m},null,40,M)],2)):p("",!0),d.value&&!o(a)?(r(),n("div",{key:1,class:c([e.class,"relative flex justify-content-center align-items-center"])},[s("div",E,[k(i,{style:{width:"40px",height:"40px"},strokeWidth:"3",animationDuration:".5s"}),O])],2)):p("",!0),o(a)&&!d.value?(r(),n("div",{key:2,class:c([e.class,"relative"]),style:S(e.style)},[s("i",{style:{"background-color":"rgba(240, 248, 255, 0.767)"},class:"pi pi-times absolute right-0 p-1 border-round-lg on-click z-5",onClick:l[0]||(l[0]=X=>C(o(a)))}),e.imageProps.accept==="image/*"?(r(),n("img",{key:0,style:{"object-fit":"contain"},class:"w-full h-full",src:o(a).base64,alt:"Lỗi ảnh"},null,8,T)):p("",!0),e.imageProps.accept==="video/*"?(r(),n("video",A,[s("source",{src:o(a).base64,type:"video/mp4"},null,8,G)])):p("",!0),e.imageProps.accept===".rar"?(r(),n("div",J,[s("div",I,[W,s("span",null,f((q=o(a))==null?void 0:q.name),1)])])):p("",!0)],6)):p("",!0)],2),s("small",H,f(o(h)),1)])],2)}}},K={class:"p-error"},Q={class:"flex flex-column gap-1 w-full"},se={__name:"DropdownValidate",props:{name:{type:String,required:!0,default:""},label:{type:String,required:!1,default:""},options:{type:Array,required:!1,default:""},class:{type:String,required:!1,default:""},style:{type:Object,required:!1,default:()=>{}},disabled:{type:Boolean,required:!1,default:!1},placeholder:{type:String,required:!1,default:""},dropdownProps:{type:Object,required:!1,default:()=>({optionLabel:"name",optionValue:"code",placeholder:"",class:"",required:!0})}},emits:["onChange"],setup(b,{emit:g}){const e=b,{value:a,errorMessage:h,setErrors:v,setValue:x}=V(e.name);return(d,u)=>{const w=P("Dropdown");return r(),n("div",{class:c(["flex flex-column gap-2",e.class]),style:S(e.style)},[s("label",null,[s("span",null,f(e.label),1),y(s("span",K," *",512),[[_,e.dropdownProps.required]])]),s("div",Q,[k(w,{modelValue:o(a),"onUpdate:modelValue":u[0]||(u[0]=m=>j(a)?a.value=m:null),options:e.options,optionLabel:e.dropdownProps.optionLabel,optionValue:e.dropdownProps.optionValue,placeholder:e.placeholder,class:c(e.dropdownProps.class),disabled:e.disabled,onChange:u[1]||(u[1]=m=>g("onChange"))},null,8,["modelValue","options","optionLabel","optionValue","placeholder","class","disabled"]),y(s("small",{class:"p-error"},f(o(h)),513),[[_,o(h)]])])],6)}}};export{se as _,ee as a};
