import{c as x,a as t,u as N,_ as l}from"./InputTextValidate-c58d52db.js";import{_ as V,O as w,l as y,P as B,Q as O,s as D,v as S,y as $,C as k,b as I,d as P,f as n,e as s,g as h,o as U,N as q}from"./index-d6a7eb74.js";import{_ as j,a as C}from"./DropdownValidate-4a42df46.js";const F={class:"flex h-full flex-column gap-3"},G={class:"card-bg flex-1 flex flex-wrap-reverse gap-3 pb-5"},M={style:{"max-width":"25rem"},class:"flex-1 flex flex-column gap-3"},A={class:"w-25rem flex gap-3"},E={style:{"padding-top":"2.8rem"},class:"image-container"},L=["src"],T={__name:"Personal",setup(Y){const{onGetterUserInfo:o,onActionGetUserInfo:i,onActionSaveUserInfo:d}=w(),r=y({avatar:null,fullName:"",gender:"",dateOfBirth:null,phoneNumber:null}),f=x({fullName:t().required("Vui lòng nhập họ và tên"),gender:t().required("Vui lòng chọn giới tính"),dateOfBirth:t().test("dateOfBirth","Vui lòng nhập đúng định dạng ngày sinh (DD/MM/YY)",a=>B(a)).required("Vui lòng nhập ngày sinh"),phoneNumber:t().test("phoneNumber","Vui lòng nhập đúng định dạng số điện thoại",a=>a.length>=10&&a.length<=12&&O(a)).required("Vui lòng nhập số điện thoại")}),{values:c,resetForm:_,setFieldValue:p,handleSubmit:g}=N({initialValues:r,validationSchema:f,keepValuesOnUnmount:!0}),v=g(async()=>{window.scrollTo(0,0),(await d(c)).success&&i(!0).then(e=>{e.success&&(D.value.userData=S(e==null?void 0:e.data))})}),m=a=>{const e=a.user;_({values:Object.assign(r,e)}),e.avatar&&p("avatar",{name:e==null?void 0:e.avatar.split("$")[1],base64:e==null?void 0:e.avatar})};return $(o,a=>{m(a)}),k(()=>{i(),o.value&&m(o.value)}),(a,e)=>{var u;const b=I("Button");return U(),P("div",F,[n(q,{icon:"pi pi-user",title:"Thông tin tài khoản"}),s("div",G,[s("div",M,[n(l,{label:"Họ và tên",name:"fullName",class:"w-full"}),n(j,{label:"Giới tính",name:"gender",options:[{name:"Nam",code:"male"},{name:"Nữ",code:"female"},{name:"Khác",code:"other"}]}),n(l,{label:"Ngày sinh",name:"dateOfBirth",class:"w-full"}),n(l,{label:"Số điện thoại",name:"phoneNumber",class:"w-full",type:"number"}),n(b,{label:"Lưu thông tin",onClick:h(v)},null,8,["onClick"])]),s("div",A,[n(C,{label:"Ảnh đại diện",name:"avatar",class:"image w-10rem h-10rem",required:!1}),s("div",E,[s("img",{src:((u=h(c).avatar)==null?void 0:u.base64)||"/images/avatar.jpg",onerror:"this.onerror=null; this.src='/images/avatar.jpg';",class:"w-7rem h-7rem object-fit-cover border-circle"},null,8,L)])])])])}}},z=V(T,[["__scopeId","data-v-75e9891c"]]);export{z as default};
