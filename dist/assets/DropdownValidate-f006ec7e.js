import{r as L,b as P,o as r,d as n,z as _,A as y,e as t,t as f,n as c,g as o,ab as B,L as p,f as k,R as S,a3 as j}from"./index-d8252bd5.js";import{b as V}from"./InputTextValidate-4481f71a.js";const R={class:c(["flex flex-column gap-2"])},N={class:"p-error"},$={class:"flex flex-column gap-1"},F={key:0,class:c(["w-full h-full relative flex align-items-center justify-content-center"])},U={key:0,class:"pi pi-plus"},M={key:1,class:"flex flex-column gap-1 align-items-center"},E=t("i",{class:"pi pi-camera text-2xl"},null,-1),O=["accept","onDrop"],T={class:"flex flex-column gap-1"},A=t("span",null,"Đang tải...",-1),G=["src"],J={key:1,class:"w-full h-full",controls:""},I=["src"],W={key:2,class:"w-full h-full flex align-items-center justify-content-center"},H={class:"flex flex-column"},K=t("img",{class:"w-10rem h-10rem object-fit-cover",src:"https://cdn1.iconfinder.com/data/icons/fs-icons-ubuntu-by-franksouza-/512/application-x-rar.png",alt:"Lỗi ảnh"},null,-1),Q={class:"p-error"},se={__name:"ImageValidate",props:{name:{type:String,required:!0,default:""},label:{type:String,required:!1,default:""},class:{type:String,required:!1,default:"w-12rem h-12rem"},style:{type:Object,required:!1,default:()=>{}},disabled:{type:Boolean,required:!1,default:!1},miniSize:{type:Boolean,required:!1,default:!1},required:{type:Boolean,required:!1,default:!0},imageProps:{type:Object,required:!1,default:()=>({maxSize:100,accept:"image/*",type:"JPG,JPEG,PNG"})}},emits:["onUpload","onRemove"],setup(b,{emit:g}){const e=b,{value:a,errorMessage:h,setErrors:v,setValue:x}=V(e.name),d=L(!1),u=s=>{const l=s/1048576;return Number(l%1===0?l.toFixed(0):l.toFixed(2))},w=s=>{var l,i;if(u(s.target.files[0].size)>Number((l=e==null?void 0:e.imageProps)==null?void 0:l.maxSize))return v(`Dung lượng tệp không được vượt quá ${(i=e==null?void 0:e.imageProps)==null?void 0:i.maxSize}MB`),!0;if(!e.imageProps.type.toLowerCase().split(",").includes(s.target.files[0].name.split(".")[s.target.files[0].name.split(".").length-1].toLowerCase()))return v("Tệp không đúng định dạng"),!0},m=async s=>{if(w(s))return;d.value=!0;const l=new FileReader;l.readAsDataURL(s.target.files[0]),l.onload=i=>{i.target.result&&x({name:s.target.files[0].name,base64:i.target.result}),d.value=!1},g("onUpload",s)},z=async s=>{const l={target:{files:[s.dataTransfer.files[0]]}};s.preventDefault(),m(l)},D=s=>{switch(s){case"image/*":return"ảnh";case"video/*":return"video";default:return"file"}},C=s=>{x(null),g("onRemove",s)};return(s,l)=>{var q;const i=P("ProgressSpinner");return r(),n("div",R,[_(t("label",null,[t("span",null,f(e.label),1),_(t("span",N,"*",512),[[y,e.required]])],512),[[y,e.label]]),t("div",$,[t("div",{class:c(["border-1 border-dashed text-main-color border-round-lg overflow-hidden",{"p-disabled":e.disabled},e.class])},[!o(a)&&!d.value?(r(),n("div",F,[e.miniSize?(r(),n("i",U)):(r(),n("div",M,[E,t("span",null,f(`Thêm ${D(e.imageProps.accept)}`),1)])),t("input",{type:"file",class:"absolute top-0 right-0 left-0 bottom-0 opacity-0 on-click",accept:e.imageProps.accept,onDrop:B(z,["prevent"]),onChange:m},null,40,O)])):p("",!0),d.value&&!o(a)?(r(),n("div",{key:1,class:c([e.class,"relative flex justify-content-center align-items-center"])},[t("div",T,[k(i,{style:{width:"40px",height:"40px"},strokeWidth:"3",animationDuration:".5s"}),A])],2)):p("",!0),o(a)&&!d.value?(r(),n("div",{key:2,class:c([e.class,"relative"]),style:S(e.style)},[t("i",{style:{"background-color":"rgba(240, 248, 255, 0.767)"},class:"pi pi-times absolute right-0 p-1 border-round-lg on-click z-5",onClick:l[0]||(l[0]=Z=>C(o(a)))}),e.imageProps.accept==="image/*"?(r(),n("img",{key:0,style:{"object-fit":"contain"},class:"w-full h-full",src:o(a).base64,alt:"Lỗi ảnh"},null,8,G)):p("",!0),e.imageProps.accept==="video/*"?(r(),n("video",J,[t("source",{src:o(a).base64,type:"video/mp4"},null,8,I)])):p("",!0),e.imageProps.accept===".rar"?(r(),n("div",W,[t("div",H,[K,t("span",null,f((q=o(a))==null?void 0:q.name),1)])])):p("",!0)],6)):p("",!0)],2),t("small",Q,f(o(h)),1)])])}}},X={class:"p-error"},Y={class:"flex flex-column gap-1 w-full"},le={__name:"DropdownValidate",props:{name:{type:String,required:!0,default:""},label:{type:String,required:!1,default:""},options:{type:Array,required:!1,default:""},class:{type:String,required:!1,default:""},style:{type:Object,required:!1,default:()=>{}},disabled:{type:Boolean,required:!1,default:!1},placeholder:{type:String,required:!1,default:""},dropdownProps:{type:Object,required:!1,default:()=>({optionLabel:"name",optionValue:"code",placeholder:"",class:"",required:!0})}},emits:["onChange"],setup(b,{emit:g}){const e=b,{value:a,errorMessage:h,setErrors:v,setValue:x}=V(e.name);return(d,u)=>{const w=P("Dropdown");return r(),n("div",{class:c(["flex flex-column gap-2",e.class]),style:S(e.style)},[t("label",null,[t("span",null,f(e.label),1),_(t("span",X,"*",512),[[y,e.dropdownProps.required]])]),t("div",Y,[k(w,{modelValue:o(a),"onUpdate:modelValue":u[0]||(u[0]=m=>j(a)?a.value=m:null),options:e.options,optionLabel:e.dropdownProps.optionLabel,optionValue:e.dropdownProps.optionValue,placeholder:e.placeholder,class:c(e.dropdownProps.class),disabled:e.disabled,onChange:u[1]||(u[1]=m=>g("onChange"))},null,8,["modelValue","options","optionLabel","optionValue","placeholder","class","disabled"]),_(t("small",{class:"p-error"},f(o(h)),513),[[y,o(h)]])])],6)}}};export{le as _,se as a};
