import{u as S,a as R,a2 as B,c as _,l as O,a1 as $,y as I,C as q,b as g,d as F,f as i,e,g as n,a3 as L,z as U,A as M,t as V,a4 as j,o as G,N as Y}from"./index-3106e3ea.js";import{c as h,a as l,u as z,b as H,_ as J}from"./InputTextValidate-a0fc5aa6.js";import{_ as P}from"./ImageValidate-95584dfa.js";import{_ as K}from"./DropdownValidate-88504b91.js";const Q={class:"flex h-full flex-column gap-3"},W={class:"card flex-1 flex flex-column gap-3"},X={class:"flex justify-content-between"},Z=e("i",{class:"pi pi-angle-left"},null,-1),w=e("span",null,"Trở lại",-1),ee=[Z,w],te={class:"flex gap-2"},ie={class:"flex gap-3"},ne={style:{width:"40%"},class:"flex gap-3"},se={class:"flex w-full flex-column gap-3"},ae={style:{width:"60%"},class:"flex flex-column gap-2"},oe=e("span",null,[j("Nội dung "),e("span",{class:"p-error"},"*")],-1),le={class:"flex flex-column gap-1"},fe={__name:"NotificationDetailAdmin",setup(ce){const s=S(),c=R(),{onGetterNotificationInfo:v,onActionGetNotificationInfo:x,onActionSaveNotificationInfo:b}=B(),d=_(()=>s.query.sendType),r=O({sendType:d.value,image:null,title:"",content:null}),a=_(()=>s.params.id==="create"?null:s.params.id),N=h({sendType:l().required("Vui lòng chọn đối tượng gửi"),image:h().required("Vui lòng chọn ảnh"),title:l().required("Vui lòng nhập tiêu đề"),content:l().required("Vui lòng nhập nội dung")}),{values:y,resetForm:k,setFieldValue:C,handleSubmit:D}=z({initialValues:r,validationSchema:N,keepValuesOnUnmount:!0}),{value:o,errorMessage:m}=H("content"),u=()=>{c.replace({name:"NotificationAdmin"})},T=D(async()=>{b(a.value,y).then(t=>{t.success&&(c.replace({name:"NotificationDetailAdmin",params:{id:t.data._id}}),$.emit("isNewData","Dữ liệu mới"))})});return I(v,t=>{k({values:Object.assign(r,t)}),t.image&&C("image",{name:t==null?void 0:t.image.split("$")[1],base64:t==null?void 0:t.image})}),q(()=>{a.value&&x(a.value)}),(t,f)=>{const p=g("Button"),A=g("Editor");return G(),F("div",Q,[i(Y,{icon:"pi pi-bell",title:"Chi tiết thông báo"}),e("div",W,[e("div",X,[e("div",{class:"flex gap-1 on-click",onClick:u},ee),e("div",te,[i(p,{label:"Hủy bỏ",outlined:"",onClick:u}),i(p,{label:"Lưu",onClick:n(T)},null,8,["onClick"])])]),e("div",ie,[e("div",ne,[i(P,{label:"Ảnh thông báo",name:"image",class:"image w-10rem h-10rem"}),e("div",se,[i(J,{label:"Tiêu đề",name:"title",class:"w-full"}),i(K,{label:"Đối tượng",name:"sendType",options:[{name:"Mọi người",code:"EVERY_BODY"},{name:"Cá nhân",code:"PERSONAL"},{name:"Đã từng nạp",code:"JOINED"}],disabled:!["ALL"].includes(d.value)},null,8,["disabled"])])]),e("div",ae,[oe,e("div",le,[i(A,{modelValue:n(o),"onUpdate:modelValue":f[0]||(f[0]=E=>L(o)?o.value=E:null),editorStyle:"height: 270px"},null,8,["modelValue"]),U(e("small",{class:"p-error"},V(n(m)),513),[[M,n(m)]])])])])])])}}};export{fe as default};
