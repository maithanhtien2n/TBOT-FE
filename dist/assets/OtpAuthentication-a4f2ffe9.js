import{a as N,S as k,l as _,r as R,y as V,b as u,d as w,e,f as i,z as o,A as n,t as f,n as h,g as I,m as y,o as O}from"./index-c41c75c2.js";const T={class:"h-screen flex flex-column justify-content-center align-items-center"},A={class:"w-20rem flex flex-column gap-3"},B={class:"flex flex-column gap-1"},U={class:"flex gap-2 align-items-center"},D={class:"pi pi-spin pi-spinner"},M={style:{color:"#10b981"},class:"pi pi-check"},z={style:{color:"rgb(228, 54, 54)"},class:"pi pi-times on-click"},G={class:"flex gap-2"},j=e("div",{class:"flex gap-3 align-items-center"},[e("span",{class:"flex-1 border-top-1 text-300"}),e("span",{class:"text-700"},"hoặc"),e("span",{class:"flex-1 border-top-1 text-300"})],-1),$={__name:"OtpAuthentication",setup(L){const m=N(),{onActionSendMail:v,onActionAuthOtp:S}=k(),l=_({email:"",otp:""}),a=_({email:"",otp:""}),s=R(""),d=c=>{const t=c.target.value;t?y(t)?a.email="":a.email="Email của bạn không hợp lệ":a.email="Vui lòng nhập email của bạn"},g=()=>{l.otp.length>4&&(l.otp=l.otp.slice(0,4))},x=async()=>{s.value="SENDING",(await v({email:l.email})).success?s.value="SENT_SUCCESS":s.value="SENT_ERROR"},E=async()=>{(await S({otp:l.otp,email:l.email})).success&&m.push({name:"Register"})};return V(()=>l.email,()=>{s.value=""}),(c,t)=>{const C=u("InputText"),r=u("Button"),b=u("InputOtp");return O(),w("div",T,[e("div",A,[e("div",B,[e("div",U,[i(C,{modelValue:l.email,"onUpdate:modelValue":t[0]||(t[0]=p=>l.email=p),placeholder:"Nhập email của bạn",class:"w-full",onBlur:d,onInput:d},null,8,["modelValue"]),o(i(r,{icon:"pi pi-arrow-right",onClick:x},null,512),[[n,l.email&&!a.email&&!s.value]]),o(e("i",D,null,512),[[n,s.value==="SENDING"]]),o(e("i",M,null,512),[[n,s.value==="SENT_SUCCESS"]]),o(e("i",z,null,512),[[n,s.value==="SENT_ERROR"]])]),o(e("small",{class:"p-error"},f(a.email),513),[[n,a.email]])]),e("div",{class:h(["flex flex-column gap-1",{"p-disabled":s.value!=="SENT_SUCCESS"}])},[e("div",G,[i(b,{modelValue:l.otp,"onUpdate:modelValue":t[1]||(t[1]=p=>l.otp=p),onInput:g},null,8,["modelValue"]),i(r,{label:"Xác thực",class:h(["flex-1",{"p-disabled":l.otp.length!==4}]),onClick:E},null,8,["class"])]),o(e("small",{class:"p-error"},f(a.otp),513),[[n,a.otp]])],2),j,i(r,{label:"Bạn đã có tài khoản?",class:"w-full",outlined:"",onClick:t[2]||(t[2]=p=>I(m).replace({name:"Login"}))})])])}}};export{$ as default};
