import{c as x,a as s,u as N,_ as l}from"./InputTextValidate-38fc6efe.js";import{_ as w,O as B,l as V,c as y,i as O,P as D,s as S,v as $,y as k,C as I,b as P,d as U,f as n,e as t,g as h,Q as q,o as j,N as C}from"./index-24aeb9c4.js";import{_ as F,a as G}from"./DropdownValidate-a83997e2.js";const M={class:"flex h-full flex-column gap-3"},T={class:"card-bg flex-1 flex flex-wrap-reverse gap-6 pb-5"},A={style:{"max-width":"25rem"},class:"flex-1 flex flex-column gap-3"},E={class:"w-25rem flex gap-3"},L={style:{"padding-top":"2.8rem"},class:"image-container"},Y=["src"],H={__name:"Personal",setup(K){const{onGetterUserInfo:o,onActionGetUserInfo:i,onActionSaveUserInfo:f}=B(),r=V({avatar:null,fullName:"",gender:"",dateOfBirth:null,phoneNumber:null});y(()=>O.value._id);const _=x({fullName:s().required("Vui lòng nhập họ và tên"),gender:s().required("Vui lòng chọn giới tính"),dateOfBirth:s().required("Vui lòng nhập ngày sinh"),phoneNumber:s().test("phoneNumber","Vui lòng nhập đúng định dạng số điện thoại",a=>a.length>=10&&a.length<=12&&D(a)).required("Vui lòng nhập số điện thoại")}),{values:c,resetForm:p,setFieldValue:m,handleSubmit:g}=N({initialValues:r,validationSchema:_,keepValuesOnUnmount:!0}),v=g(async()=>{window.scrollTo(0,0),(await f(c)).success&&i(!0).then(e=>{e.success&&(S.value.userData=$(e==null?void 0:e.data))})}),d=a=>{const e=a.user;p({values:Object.assign(r,e)}),e.avatar&&m("avatar",{name:e==null?void 0:e.avatar.split("$")[1],base64:e==null?void 0:e.avatar}),e!=null&&e.dateOfBirth&&m("dateOfBirth",q(e==null?void 0:e.dateOfBirth))};return k(o,a=>{d(a)}),I(()=>{i(),o.value&&d(o.value)}),(a,e)=>{var u;const b=P("Button");return j(),U("div",M,[n(C,{icon:"pi pi-user",title:"Thông tin tài khoản"}),t("div",T,[t("div",A,[n(l,{label:"Họ và tên",name:"fullName",class:"w-full"}),n(F,{label:"Giới tính",name:"gender",options:[{name:"Nam",code:"male"},{name:"Nữ",code:"female"},{name:"Khác",code:"other"}]}),n(l,{label:"Ngày sinh",name:"dateOfBirth",class:"w-full"}),n(l,{label:"Số điện thoại",name:"phoneNumber",class:"w-full",type:"number"}),n(b,{label:"Lưu thông tin",onClick:h(v)},null,8,["onClick"])]),t("div",E,[n(G,{label:"Ảnh đại diện",name:"avatar",class:"image w-10rem h-10rem",required:!1}),t("div",L,[t("img",{src:((u=h(c).avatar)==null?void 0:u.base64)||"/images/avatar.jpg",onerror:"this.onerror=null; this.src='/images/avatar.jpg';",class:"w-7rem h-7rem object-fit-cover border-circle"},null,8,Y)])])])])}}},R=w(H,[["__scopeId","data-v-dd25de21"]]);export{R as default};
